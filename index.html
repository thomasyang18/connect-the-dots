<!DOCTYPE html>
<html>
<head>
    <title>Connect the Dots</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="header">

        <h1 id="title">Connect the Dots</h1>
        <!-- <div class="arrow-buttons">
            <span id="m-display">Number of colors: 3</span>
        </div> -->
    </div>

    <div class="arrow-buttons">
        <button id="decrease-n" class="arrow-button">◀</button>
        <span id="n-display">Number of nodes: 6</span>
        <button id="increase-n" class="arrow-button">▶</button>
    </div>

    <div class="summary-box">
        <p class="summary">
            You are given a polygon of n nodes, each colored red, blue, or green. The goal of the game is to connect all nodes of the same color without any lines crossing. Click on a node to select it, then click on another node of a different color to connect them. The game will automatically deselect nodes if the connection is invalid.
        </p>
    </div>

    <div style="display: flex; align-items: center; justify-content: center;">
        <p id="max-edges-display">Edges left: 3</p>
        <button id="proof-button" style="display: none; background-color: red; color: white; border: none; border-radius: 5px; padding: 5px 15px; font-size: 14px; cursor: pointer; margin-left: 10px; font-weight: bold;">Reveal/Hide proof</button>
    </div>

    <div id="canvas-container" style="display: flex; align-items: center; justify-content: center; padding: 20px;">
        <div id="proof-div" style="display: none; width: 800px; height: 800px; background-color: #f0f0f0; border-radius: 10px; padding: 20px; opacity: 0; transition: opacity 0.5s;">
            <p>
              The central observation is that we can simplify the problem by repeatedly “shrinking” our configuration. Consider any three consecutive nodes—denote them as <strong>[a, b, c]</strong>. If the color of <em>a</em> is different from the color of <em>c</em> (<code>color[a] ≠ color[c]</code>), then the middle node <em>b</em> can be removed (or "contracted") without losing the overall diversity of colors.
            </p>
            <p>
              This contraction does not affect the possibility of drawing curves later on because it preserves the essential property: having at least three distinct colors. In essence, each contraction “shrinks” the polygon by one node while maintaining the structure needed for drawing valid curves.
            </p>

            <h2>Why Contraction is Always Possible</h2>
            <p>
              The proof proceeds in two parts:
            </p>
            <ol>
              <li>
                <strong>Base Case (<em>N = 4</em>):</strong>
                For four points with at least three distinct colors, one can verify by inspection that there is a valid configuration for drawing the curves. In every valid combination, there exists an edge that can be added without violating the rules.
              </li>
              <li>
                <strong>Inductive Step (<em>N &gt; 4</em>):</strong>
                Assume we have a configuration with <em>N</em> points and at least three colors. If there is a consecutive triplet <strong>[a, b, c]</strong> with <code>color[a] ≠ color[c]</code>, we can contract this triplet by removing <em>b</em>, leaving a configuration with <em>N-1</em> points that still contains at least three distinct colors.
              </li>
            </ol>
            <p>
              But what if no such triplet exists? This would force every consecutive triplet to have the first and third nodes sharing the same color. In a circular (or polygonal) arrangement, the only way for this to happen throughout is if the colors alternate between just two values (for instance, <em>[a, b, a, b, …]</em>). However, we are given that there are at least three distinct colors. Thus, a configuration with no valid triplet cannot exist.
            </p>

            <div class="note">
              <strong>Intuition Behind the Contradiction:</strong>
              If no contraction were possible, the only arrangement allowed would be one that cycles between two colors. Since we know a third color appears, such an arrangement is impossible—meaning a valid contraction step must always exist.
            </div>

            <h2>Putting It All Together</h2>
            <p>
              By repeatedly applying the contraction operation, we “reduce” the original problem step by step. Each contraction guarantees that the remaining configuration still has at least three distinct colors, so the process can continue until the configuration becomes simple enough (such as the base case with 4 points) where drawing the curves is straightforward.
            </p>
            <p>
              Therefore, by induction, the maximum number of curves that can be drawn is achievable, as the existence of at least three colors ensures that the necessary contraction steps are always available.
            </p>

            <h2>Final Summary</h2>
            <p>
              In summary, our proof shows that:
            </p>
            <ul>
              <li>
                <strong>Contraction:</strong> When given a triplet <strong>[a, b, c]</strong> with <code>color[a] ≠ color[c]</code>, we can safely remove <em>b</em> without losing color diversity.
              </li>
              <li>
                <strong>Inductive Argument:</strong> For <em>N &gt; 4</em>, such a contraction is always possible since an alternating two-color pattern is impossible with three or more colors.
              </li>
              <li>
                <strong>Conclusion:</strong> The contraction process reduces the problem to a manageable base case, ensuring that we can always achieve the maximum number of curves.
              </li>
            </ul>
            <p>
              This method of “shrinking” the problem not only gives us a rigorous argument via induction but also provides the intuition behind why having at least three distinct colors guarantees a solution.
            </p>
        </div>
        <canvas id="canvas" width="800" height="800"></canvas>
    </div>

    <script type="module" src="main.js"></script>
</body>
</html>
