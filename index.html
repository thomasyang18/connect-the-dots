<!DOCTYPE html>
<html>
<head>
    <title>Connect the Dots</title>
</head>
<body>
    <h1>Connect the Dots</h1>
    <p>Enter the number of points (N) and the number of colors (M):</p>
    <input type="number" id="n" placeholder="N">
    <input type="number" id="m" placeholder="M">
    <br>
    <p>Enter the colors of the points (space-separated):</p>
    <input type="text" id="colors" placeholder="e.g., 1 2 1 2">
    <br>
    <button onclick="connectDots()">Connect the Dots</button>
    <br>
    <canvas id="canvas" width="400" height="400"></canvas>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        let n = 0;
        let m = 0;
        let colors = [];
        let connections = [];
        let selectedVertex = null;

        function drawPolygon() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = Math.min(centerX, centerY) * 0.8;

            ctx.beginPath();
            for (let i = 0; i < n; i++) {
                const angle = (2 * Math.PI * i) / n;
                const x = centerX + radius * Math.cos(angle);
                const y = centerY + radius * Math.sin(angle);
                ctx.lineTo(x, y);

                ctx.beginPath();
                ctx.arc(x, y, 5, 0, 2 * Math.PI); // Draw vertex as small circle
                ctx.fillStyle = `hsl(${colors[i] * 360 / m}, 100%, 50%)`; // Use color input
                ctx.fill();
            }
            ctx.closePath();
            ctx.stroke();


            // Draw connections
            ctx.strokeStyle = 'black';
            connections.forEach(connection => {
                const start = connection[0];
                const end = connection[1];
                const startX = centerX + radius * Math.cos((2 * Math.PI * start) / n);
                const startY = centerY + radius * Math.sin((2 * Math.PI * start) / n);
                const endX = centerX + radius * Math.cos((2 * Math.PI * end) / n);
                const endY = centerY + radius * Math.sin((2 * Math.PI * end) / n);

                ctx.beginPath();
                ctx.moveTo(startX, startY);
                ctx.lineTo(endX, endY);
                ctx.stroke();
            });
        }

        function connectDots() {
            n = parseInt(document.getElementById("n").value);
            m = parseInt(document.getElementById("m").value);
            colors = document.getElementById("colors").value.split(" ").map(Number);
            connections = []; // Clear existing connections
            selectedVertex = null;
            drawPolygon();
        }

        canvas.addEventListener('click', function(event) {
            const rect = canvas.getBoundingClientRect();
            const mouseX = event.clientX - rect.left;
            const mouseY = event.clientY - rect.top;
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = Math.min(centerX, centerY) * 0.8;

            for (let i = 0; i < n; i++) {
                const angle = (2 * Math.PI * i) / n;
                const x = centerX + radius * Math.cos(angle);
                const y = centerY + radius * Math.sin(angle);
                if (Math.sqrt((mouseX - x)**2 + (mouseY - y)**2) < 10) { // Check if click is near a vertex
                    if (selectedVertex === null) {
                        selectedVertex = i;
                    } else {
                        if (colors[selectedVertex] !== colors[i]) { // Check for different colors
                            // Add intersection check here later
                            connections.push([selectedVertex, i]);
                            selectedVertex = null;
                            drawPolygon(); // Redraw to show the connection
                        } else {
                            selectedVertex = null; // Deselect if same color
                        }

                    }
                    break;
                }
            }


        });

    </script>
</body>
</html>
